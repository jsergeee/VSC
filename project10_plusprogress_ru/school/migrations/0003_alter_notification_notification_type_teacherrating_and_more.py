# Generated by Django 6.0.2 on 2026-02-21 08:23

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('school', '0002_notification'),
    ]

    operations = [
        migrations.AlterField(
            model_name='notification',
            name='notification_type',
            field=models.CharField(choices=[('lesson_reminder', 'üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–Ω—è—Ç–∏–∏'), ('lesson_canceled', '‚ùå –ó–∞–Ω—è—Ç–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ'), ('lesson_completed', '‚úÖ –ó–∞–Ω—è—Ç–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ'), ('payment_received', 'üí∞ –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤'), ('payment_withdrawn', 'üí∏ –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤'), ('material_added', 'üìö –ù–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª'), ('homework_assigned', 'üìù –ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ'), ('feedback_received', '‚≠ê –ù–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞'), ('system', '‚öô –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ')], default='system', max_length=20, verbose_name='–¢–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è'),
        ),
        migrations.CreateModel(
            name='TeacherRating',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('average_rating', models.FloatField(default=0, verbose_name='–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª')),
                ('total_feedbacks', models.IntegerField(default=0, verbose_name='–í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫')),
                ('rating_5_count', models.IntegerField(default=0, verbose_name='5‚≠ê')),
                ('rating_4_count', models.IntegerField(default=0, verbose_name='4‚≠ê')),
                ('rating_3_count', models.IntegerField(default=0, verbose_name='3‚≠ê')),
                ('rating_2_count', models.IntegerField(default=0, verbose_name='2‚≠ê')),
                ('rating_1_count', models.IntegerField(default=0, verbose_name='1‚≠ê')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('teacher', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='rating_stats', to='school.teacher', verbose_name='–£—á–∏—Ç–µ–ª—å')),
            ],
            options={
                'verbose_name': '–†–µ–π—Ç–∏–Ω–≥ —É—á–∏—Ç–µ–ª—è',
                'verbose_name_plural': '–†–µ–π—Ç–∏–Ω–≥–∏ —É—á–∏—Ç–µ–ª–µ–π',
            },
        ),
        migrations.CreateModel(
            name='LessonFeedback',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rating', models.IntegerField(choices=[(1, '‚≠ê –£–∂–∞—Å–Ω–æ'), (2, '‚≠ê‚≠ê –ü–ª–æ—Ö–æ'), (3, '‚≠ê‚≠ê‚≠ê –ù–æ—Ä–º–∞–ª—å–Ω–æ'), (4, '‚≠ê‚≠ê‚≠ê‚≠ê –•–æ—Ä–æ—à–æ'), (5, '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—Ç–ª–∏—á–Ω–æ')], verbose_name='–û—Ü–µ–Ω–∫–∞')),
                ('comment', models.TextField(blank=True, help_text='–ß—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å? –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å?', verbose_name='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π')),
                ('is_public', models.BooleanField(default=False, help_text='–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Å–∞–π—Ç–µ?', verbose_name='–ü—É–±–ª–∏—á–Ω—ã–π –æ—Ç–∑—ã–≤')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ –æ—Ü–µ–Ω–∫–∏')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')),
                ('lesson', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='feedback', to='school.lesson', verbose_name='–£—Ä–æ–∫')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feedbacks', to='school.student', verbose_name='–£—á–µ–Ω–∏–∫')),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feedbacks', to='school.teacher', verbose_name='–£—á–∏—Ç–µ–ª—å')),
            ],
            options={
                'verbose_name': '–û—Ü–µ–Ω–∫–∞ —É—Ä–æ–∫–∞',
                'verbose_name_plural': '–û—Ü–µ–Ω–∫–∏ —É—Ä–æ–∫–æ–≤',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['teacher', '-created_at'], name='school_less_teacher_5a8524_idx'), models.Index(fields=['student', '-created_at'], name='school_less_student_7bee19_idx'), models.Index(fields=['rating'], name='school_less_rating_90c6f1_idx')],
            },
        ),
    ]
